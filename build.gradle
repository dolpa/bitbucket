/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */
plugins {
    id 'com.palantir.docker' version '0.25.0'
}

def docker_hub_repo = 'dolpa'

if (!project.hasProperty("version")) {
  version = "7.5.0"
}

// println "Docker Hub Repo Name: ${docker_hub_repo}"
// println "Name: ${project.name}"
// println "Version: ${project.version}"

docker {
    name "${docker_hub_repo}/${project.name}:${version}"
    tag '-version', "${docker_hub_repo}/${project.name}:${project.version}"
    tag '-latest', "${docker_hub_repo}/${project.name}:latest"
    dockerfile file('Dockerfile')
    files "start-bitbucket-docker.sh"
    buildArgs([version: "${version}"])
    labels(['app': "${project.name}", 
            'app-version': "${version}"])
    pull true
    noCache true
}